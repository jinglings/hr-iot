# è®¾å¤‡å½±å­å’Œè¾¹ç¼˜è®¡ç®—å‰ç«¯å¼€å‘æŒ‡å—

## æ–‡æ¡£ä¿¡æ¯
- **åˆ›å»ºæ—¶é—´**: 2025-11-18
- **æ¨¡å—**: yudao-module-iot å‰ç«¯ç•Œé¢å¼€å‘
- **å‰ç«¯é¡¹ç›®**: hr-vue3
- **åç«¯æ¥å£**: å·²å®Œæ•´å®ç° âœ…
- **ç‰ˆæœ¬**: v1.0

---

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£åŸºäºåç«¯å·²å®ç°çš„REST APIæ¥å£ï¼Œè§„åˆ’è®¾å¤‡å½±å­å’Œè¾¹ç¼˜è®¡ç®—çš„å‰ç«¯ç®¡ç†ç•Œé¢å¼€å‘ã€‚

**åç«¯æ¥å£çŠ¶æ€**ï¼š
- âœ… è®¾å¤‡å½±å­æ¨¡å—ï¼š7ä¸ªæ¥å£å·²å®ç°
- âœ… è¾¹ç¼˜ç½‘å…³æ¨¡å—ï¼š8ä¸ªæ¥å£å·²å®ç°
- âœ… è¾¹ç¼˜è§„åˆ™æ¨¡å—ï¼š9ä¸ªæ¥å£å·²å®ç°
- âœ… è¾¹ç¼˜AIæ¨¡å‹æ¨¡å—ï¼š7ä¸ªæ¥å£å·²å®ç°
- âœ… è¾¹ç¼˜ç½‘å…³çŠ¶æ€æ¨¡å—ï¼šæ¥å£å·²å®ç°
- âœ… è¾¹ç¼˜æ¨¡å‹éƒ¨ç½²æ¨¡å—ï¼šæ¥å£å·²å®ç°
- âœ… è¾¹ç¼˜è§„åˆ™æ—¥å¿—æ¨¡å—ï¼šæ¥å£å·²å®ç°

---

## ä¸€ã€è®¾å¤‡å½±å­ï¼ˆDevice Shadowï¼‰å‰ç«¯å¼€å‘

### 1.1 åç«¯æ¥å£æ¸…å•

**Base URL**: `/iot/device-shadow`

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| GET | `/get?deviceId={id}` | è·å–è®¾å¤‡å½±å­ | iot:device:query |
| PUT | `/update-desired` | æ›´æ–°æœŸæœ›çŠ¶æ€ | iot:device:update |
| PUT | `/update-reported` | æ›´æ–°å®é™…çŠ¶æ€ï¼ˆè®¾å¤‡ä¸ŠæŠ¥ï¼‰ | iot:device:update |
| DELETE | `/delete-desired-property?deviceId={id}&property={name}` | åˆ é™¤æœŸæœ›å±æ€§ | iot:device:update |
| GET | `/get-delta?deviceId={id}` | è·å–å·®é‡çŠ¶æ€ | iot:device:query |
| GET | `/history?deviceId={id}&pageNo={}&pageSize={}` | è·å–å½±å­å†å² | iot:device:query |
| DELETE | `/clear?deviceId={id}` | æ¸…é™¤è®¾å¤‡å½±å­ | iot:device:delete |

### 1.2 æ•°æ®ç»“æ„ï¼ˆTypeScriptï¼‰

```typescript
// ===== å“åº”VO =====

/**
 * è®¾å¤‡å½±å­å“åº”VO
 */
export interface DeviceShadowVO {
  id: number                          // ä¸»é”®
  deviceId: number                    // è®¾å¤‡ID
  desired: Record<string, any>        // æœŸæœ›çŠ¶æ€ï¼ˆJSONå¯¹è±¡ï¼‰
  reported: Record<string, any>       // å®é™…çŠ¶æ€ï¼ˆJSONå¯¹è±¡ï¼‰
  delta: Record<string, any>          // å·®é‡çŠ¶æ€ï¼ˆJSONå¯¹è±¡ï¼‰
  metadata: {                         // å…ƒæ•°æ®
    desired: Record<string, { timestamp: number }>
    reported: Record<string, { timestamp: number }>
  }
  version: number                     // ç‰ˆæœ¬å·
  desiredVersion: number              // æœŸæœ›çŠ¶æ€ç‰ˆæœ¬å·
  reportedVersion: number             // å®é™…çŠ¶æ€ç‰ˆæœ¬å·
  lastDesiredTime: Date               // æœ€åæœŸæœ›çŠ¶æ€æ›´æ–°æ—¶é—´
  lastReportedTime: Date              // æœ€åå®é™…çŠ¶æ€ä¸ŠæŠ¥æ—¶é—´
  createTime: Date                    // åˆ›å»ºæ—¶é—´
}

/**
 * è®¾å¤‡å½±å­å†å²è®°å½•VO
 */
export interface DeviceShadowHistoryVO {
  id: number                          // ä¸»é”®
  deviceId: number                    // è®¾å¤‡ID
  shadowId: number                    // å½±å­ID
  changeType: string                  // å˜æ›´ç±»å‹ï¼šDESIRED, REPORTED, DELTA
  beforeState: Record<string, any>    // å˜æ›´å‰çŠ¶æ€ï¼ˆJSONï¼‰
  afterState: Record<string, any>     // å˜æ›´åçŠ¶æ€ï¼ˆJSONï¼‰
  deltaState: Record<string, any>     // å·®é‡çŠ¶æ€ï¼ˆJSONï¼‰
  version: number                     // ç‰ˆæœ¬å·
  creator: string                     // åˆ›å»ºè€…
  createTime: Date                    // åˆ›å»ºæ—¶é—´
}

// ===== è¯·æ±‚VO =====

/**
 * æ›´æ–°æœŸæœ›çŠ¶æ€è¯·æ±‚VO
 */
export interface UpdateDesiredReqVO {
  deviceId: number                    // è®¾å¤‡ID
  desired: Record<string, any>        // æœŸæœ›çŠ¶æ€ï¼ˆJSONå¯¹è±¡ï¼‰
}

/**
 * æ›´æ–°å®é™…çŠ¶æ€è¯·æ±‚VOï¼ˆè®¾å¤‡ä¸ŠæŠ¥ï¼‰
 */
export interface UpdateReportedReqVO {
  deviceId: number                    // è®¾å¤‡ID
  reported: Record<string, any>       // å®é™…çŠ¶æ€ï¼ˆJSONå¯¹è±¡ï¼‰
}
```

### 1.3 é¡µé¢è®¾è®¡

#### 1.3.1 è®¾å¤‡å½±å­å…¥å£ï¼ˆé›†æˆåˆ°è®¾å¤‡è¯¦æƒ…é¡µï¼‰

**ä½ç½®**: `hr-vue3/src/views/iot/device/device/detail/index.vue`

åœ¨ç°æœ‰è®¾å¤‡è¯¦æƒ…é¡µå¢åŠ "è®¾å¤‡å½±å­"Tabæ ‡ç­¾é¡µã€‚

**è·¯ç”±**: `/iot/device/detail/:id?tab=shadow`

**è®¾è®¡æ€è·¯**ï¼š
- åœ¨è®¾å¤‡è¯¦æƒ…é¡µçš„Tabä¸­æ–°å¢"è®¾å¤‡å½±å­"é€‰é¡¹
- ä»…å½“è®¾å¤‡æ”¯æŒå½±å­åŠŸèƒ½æ—¶æ˜¾ç¤ºè¯¥Tab
- ç‚¹å‡»TabåŠ è½½è®¾å¤‡å½±å­æ•°æ®

#### 1.3.2 è®¾å¤‡å½±å­ä¸»è§†å›¾ç»„ä»¶

**æ–‡ä»¶**: `hr-vue3/src/views/iot/device/device/detail/DeviceDetailsShadow.vue`

**å¸ƒå±€è®¾è®¡**ï¼ˆä¸‰æ å¯¹æ¯”å¸ƒå±€ï¼‰ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è®¾å¤‡å½±å­ - è®¾å¤‡åç§°                              â”‚
â”‚  [åˆ·æ–°] [æ¸…é™¤å½±å­] [æŸ¥çœ‹å†å²]                         ç‰ˆæœ¬: v15    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ æœŸæœ›çŠ¶æ€      â”‚  å®é™…çŠ¶æ€     â”‚  å·®é‡çŠ¶æ€     â”‚                  â”‚
â”‚  â”‚ (Desired)    â”‚  (Reported)  â”‚  (Delta)     â”‚                  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚
â”‚  â”‚              â”‚              â”‚              â”‚                  â”‚
â”‚  â”‚ {            â”‚ {            â”‚ {            â”‚                  â”‚
â”‚  â”‚   "power":   â”‚   "power":   â”‚   "power":   â”‚                  â”‚
â”‚  â”‚   true,      â”‚   false,     â”‚   true       â”‚                  â”‚
â”‚  â”‚   "temp": 25 â”‚   "temp": 22 â”‚   "temp": 25 â”‚                  â”‚
â”‚  â”‚ }            â”‚ }            â”‚ }            â”‚                  â”‚
â”‚  â”‚              â”‚              â”‚              â”‚                  â”‚
â”‚  â”‚ [ç¼–è¾‘]       â”‚ [åˆ·æ–°]       â”‚ [åŒæ­¥åˆ°è®¾å¤‡]  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                    â”‚
â”‚  å…ƒæ•°æ®ä¿¡æ¯:                                                        â”‚
â”‚  - æœŸæœ›çŠ¶æ€ç‰ˆæœ¬: v12  æœ€åæ›´æ–°: 2025-11-18 10:30:15              â”‚
â”‚  - å®é™…çŠ¶æ€ç‰ˆæœ¬: v11  æœ€åæ›´æ–°: 2025-11-18 10:25:30              â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠŸèƒ½ç‚¹**ï¼š

1. **æœŸæœ›çŠ¶æ€ï¼ˆDesiredï¼‰åŒºåŸŸ**
   - ä½¿ç”¨JSONç¼–è¾‘å™¨ï¼ˆå¦‚Monaco Editoræˆ–ç®€å•çš„JSONå±•ç¤ºï¼‰
   - æä¾›"ç¼–è¾‘"æŒ‰é’®ï¼Œå¼¹å‡ºå¯¹è¯æ¡†ç¼–è¾‘JSON
   - ç¼–è¾‘åè°ƒç”¨ `PUT /device-shadow/update-desired`

2. **å®é™…çŠ¶æ€ï¼ˆReportedï¼‰åŒºåŸŸ**
   - åªè¯»å±•ç¤ºï¼ˆJSONæ ¼å¼ï¼‰
   - æä¾›"åˆ·æ–°"æŒ‰é’®é‡æ–°è·å–

3. **å·®é‡çŠ¶æ€ï¼ˆDeltaï¼‰åŒºåŸŸ**
   - åªè¯»å±•ç¤ºå·®å¼‚å­—æ®µ
   - é«˜äº®æ˜¾ç¤ºå·®å¼‚éƒ¨åˆ†
   - æä¾›"åŒæ­¥åˆ°è®¾å¤‡"æŒ‰é’®ï¼ˆå®é™…ä¸Šæ˜¯æ›´æ–°æœŸæœ›çŠ¶æ€ï¼‰

4. **é¡¶éƒ¨æ“ä½œæ **
   - åˆ·æ–°ï¼šé‡æ–°è·å–å½±å­æ•°æ®
   - æ¸…é™¤å½±å­ï¼šè°ƒç”¨ `DELETE /device-shadow/clear`
   - æŸ¥çœ‹å†å²ï¼šæ‰“å¼€å†å²è®°å½•å¯¹è¯æ¡†

#### 1.3.3 å½±å­å†å²è®°å½•å¯¹è¯æ¡†

**ç»„ä»¶**: `hr-vue3/src/views/iot/device/device/detail/components/ShadowHistoryDialog.vue`

**è®¾è®¡**ï¼š
- ä½¿ç”¨ `el-dialog` å¯¹è¯æ¡†
- ä½¿ç”¨ `el-table` å±•ç¤ºå†å²è®°å½•ï¼ˆåˆ†é¡µï¼‰
- åˆ—ï¼šæ—¶é—´ã€å˜æ›´ç±»å‹ã€ç‰ˆæœ¬å·ã€å˜æ›´å†…å®¹ï¼ˆå¯å±•å¼€æŸ¥çœ‹JSONï¼‰
- æä¾›ç­›é€‰ï¼šæŒ‰æ—¶é—´èŒƒå›´ã€æŒ‰å˜æ›´ç±»å‹

### 1.4 API Serviceå®ç°

**æ–‡ä»¶**: `hr-vue3/src/api/iot/device/shadow.ts`

```typescript
import request from '@/utils/request'

// è®¾å¤‡å½±å­ API
export const DeviceShadowApi = {
  // è·å–è®¾å¤‡å½±å­
  getShadow: async (deviceId: number) => {
    return await request.get({
      url: `/iot/device-shadow/get`,
      params: { deviceId }
    })
  },

  // æ›´æ–°æœŸæœ›çŠ¶æ€
  updateDesired: async (data: UpdateDesiredReqVO) => {
    return await request.put({
      url: `/iot/device-shadow/update-desired`,
      data
    })
  },

  // æ›´æ–°å®é™…çŠ¶æ€ï¼ˆè®¾å¤‡ä¸ŠæŠ¥ï¼Œä¸€èˆ¬ç”±è®¾å¤‡è°ƒç”¨ï¼Œå‰ç«¯è¾ƒå°‘ä½¿ç”¨ï¼‰
  updateReported: async (data: UpdateReportedReqVO) => {
    return await request.put({
      url: `/iot/device-shadow/update-reported`,
      data
    })
  },

  // åˆ é™¤æœŸæœ›çŠ¶æ€ä¸­çš„æŸä¸ªå±æ€§
  deleteDesiredProperty: async (deviceId: number, property: string) => {
    return await request.delete({
      url: `/iot/device-shadow/delete-desired-property`,
      params: { deviceId, property }
    })
  },

  // è·å–å·®é‡çŠ¶æ€
  getDelta: async (deviceId: number) => {
    return await request.get({
      url: `/iot/device-shadow/get-delta`,
      params: { deviceId }
    })
  },

  // è·å–å½±å­å†å²è®°å½•ï¼ˆåˆ†é¡µï¼‰
  getHistory: async (params: {
    deviceId: number
    pageNo: number
    pageSize: number
  }) => {
    return await request.get({
      url: `/iot/device-shadow/history`,
      params
    })
  },

  // æ¸…é™¤è®¾å¤‡å½±å­
  clearShadow: async (deviceId: number) => {
    return await request.delete({
      url: `/iot/device-shadow/clear`,
      params: { deviceId }
    })
  }
}
```

---

## äºŒã€è¾¹ç¼˜è®¡ç®—ï¼ˆEdge Computingï¼‰å‰ç«¯å¼€å‘

### 2.1 æ¨¡å—æ¶æ„

è¾¹ç¼˜è®¡ç®—æ¨¡å—åŒ…å«ä»¥ä¸‹å­æ¨¡å—ï¼š

1. **è¾¹ç¼˜ç½‘å…³ç®¡ç†** (`IotEdgeGatewayController`)
2. **è¾¹ç¼˜è§„åˆ™ç®¡ç†** (`IotEdgeRuleController`)
3. **è¾¹ç¼˜AIæ¨¡å‹ç®¡ç†** (`IotEdgeAiModelController`)
4. **ç½‘å…³çŠ¶æ€ç›‘æ§** (`IotEdgeGatewayStatusController`)
5. **æ¨¡å‹éƒ¨ç½²ç®¡ç†** (`IotEdgeModelDeploymentController`)
6. **è§„åˆ™æ—¥å¿—æŸ¥è¯¢** (`IotEdgeRuleLogController`)

### 2.2 è¾¹ç¼˜ç½‘å…³ç®¡ç†

#### 2.2.1 åç«¯æ¥å£æ¸…å•

**Base URL**: `/iot/edge-gateway`

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| POST | `/create` | åˆ›å»ºè¾¹ç¼˜ç½‘å…³ | iot:edge-gateway:create |
| PUT | `/update` | æ›´æ–°è¾¹ç¼˜ç½‘å…³ | iot:edge-gateway:update |
| DELETE | `/delete?id={id}` | åˆ é™¤è¾¹ç¼˜ç½‘å…³ | iot:edge-gateway:delete |
| GET | `/get?id={id}` | è·å–ç½‘å…³è¯¦æƒ… | iot:edge-gateway:query |
| GET | `/page` | åˆ†é¡µæŸ¥è¯¢ç½‘å…³ | iot:edge-gateway:query |
| PUT | `/enable?id={id}` | å¯ç”¨ç½‘å…³ | iot:edge-gateway:update |
| PUT | `/disable?id={id}` | ç¦ç”¨ç½‘å…³ | iot:edge-gateway:update |
| GET | `/get-by-key?gatewayKey={key}` | é€šè¿‡keyè·å–ç½‘å…³ | iot:edge-gateway:query |

#### 2.2.2 æ•°æ®ç»“æ„

```typescript
/**
 * è¾¹ç¼˜ç½‘å…³å“åº”VO
 */
export interface EdgeGatewayVO {
  id: number                      // ä¸»é”®
  name: string                    // ç½‘å…³åç§°
  serialNumber: string            // ç½‘å…³åºåˆ—å·
  gatewayKey: string              // ç½‘å…³æ ‡è¯†ï¼ˆå”¯ä¸€ï¼‰
  gatewaySecret: string           // ç½‘å…³å¯†é’¥

  // è®¾å¤‡ä¿¡æ¯
  deviceType: string              // è®¾å¤‡å‹å·
  hardwareVersion: string         // ç¡¬ä»¶ç‰ˆæœ¬
  softwareVersion: string         // è½¯ä»¶ç‰ˆæœ¬

  // ç½‘ç»œä¿¡æ¯
  ipAddress: string               // IPåœ°å€
  macAddress: string              // MACåœ°å€
  location: string                // å®‰è£…ä½ç½®

  // çŠ¶æ€ä¿¡æ¯
  status: number                  // çŠ¶æ€: 0=æœªæ¿€æ´», 1=åœ¨çº¿, 2=ç¦»çº¿
  lastOnlineTime: Date            // æœ€ååœ¨çº¿æ—¶é—´
  lastOfflineTime: Date           // æœ€åç¦»çº¿æ—¶é—´
  activeTime: Date                // æ¿€æ´»æ—¶é—´

  // èµ„æºä¿¡æ¯
  cpuCores: number                // CPUæ ¸å¿ƒæ•°
  memoryTotal: number             // æ€»å†…å­˜(MB)
  diskTotal: number               // æ€»ç£ç›˜(GB)

  // é…ç½®ä¿¡æ¯
  config: string                  // ç½‘å…³é…ç½®(JSONå­—ç¬¦ä¸²)
  description: string             // æè¿°

  // æ ‡å‡†å­—æ®µ
  creator: string                 // åˆ›å»ºè€…
  createTime: Date                // åˆ›å»ºæ—¶é—´
  updater: string                 // æ›´æ–°è€…
  updateTime: Date                // æ›´æ–°æ—¶é—´
}

/**
 * è¾¹ç¼˜ç½‘å…³åˆ†é¡µæŸ¥è¯¢è¯·æ±‚VO
 */
export interface EdgeGatewayPageReqVO {
  pageNo: number                  // é¡µç 
  pageSize: number                // æ¯é¡µæ•°é‡
  name?: string                   // ç½‘å…³åç§°ï¼ˆæ¨¡ç³Šæœç´¢ï¼‰
  status?: number                 // çŠ¶æ€
  serialNumber?: string           // åºåˆ—å·
}

/**
 * è¾¹ç¼˜ç½‘å…³åˆ›å»ºè¯·æ±‚VO
 */
export interface EdgeGatewayCreateReqVO {
  name: string                    // ç½‘å…³åç§°
  serialNumber: string            // ç½‘å…³åºåˆ—å·
  deviceType?: string             // è®¾å¤‡å‹å·
  location?: string               // å®‰è£…ä½ç½®
  description?: string            // æè¿°
}

/**
 * è¾¹ç¼˜ç½‘å…³æ›´æ–°è¯·æ±‚VO
 */
export interface EdgeGatewayUpdateReqVO {
  id: number                      // ä¸»é”®
  name?: string                   // ç½‘å…³åç§°
  deviceType?: string             // è®¾å¤‡å‹å·
  location?: string               // å®‰è£…ä½ç½®
  description?: string            // æè¿°
}
```

#### 2.2.3 é¡µé¢è®¾è®¡

**ç›®å½•ç»“æ„**ï¼š
```
hr-vue3/src/views/iot/edge/
â”œâ”€â”€ gateway/
â”‚   â”œâ”€â”€ index.vue               # ç½‘å…³åˆ—è¡¨é¡µ
â”‚   â”œâ”€â”€ GatewayForm.vue         # ç½‘å…³è¡¨å•ï¼ˆåˆ›å»º/ç¼–è¾‘ï¼‰
â”‚   â””â”€â”€ detail/
â”‚       â”œâ”€â”€ index.vue           # ç½‘å…³è¯¦æƒ…é¡µ
â”‚       â”œâ”€â”€ GatewayInfo.vue     # ç½‘å…³ä¿¡æ¯Tab
â”‚       â”œâ”€â”€ GatewayMonitor.vue  # ç›‘æ§æ•°æ®Tab
â”‚       â””â”€â”€ GatewayRules.vue    # å…³è”è§„åˆ™Tab
```

**1) ç½‘å…³åˆ—è¡¨é¡µ** (`gateway/index.vue`)

å¸ƒå±€ï¼š
- æœç´¢æ ï¼šç½‘å…³åç§°ã€çŠ¶æ€ã€åºåˆ—å·
- æ“ä½œæ ï¼šæ–°å»ºç½‘å…³ã€æ‰¹é‡æ“ä½œ
- è¡¨æ ¼ï¼š
  - åˆ—ï¼šåç§°ã€åºåˆ—å·ã€IPåœ°å€ã€çŠ¶æ€ã€åœ¨çº¿æ—¶é—´ã€CPU/å†…å­˜/ç£ç›˜ã€æ“ä½œ
  - çŠ¶æ€badgeï¼šåœ¨çº¿(ç»¿)ã€ç¦»çº¿(ç°)ã€æœªæ¿€æ´»(æ©™)
  - æ“ä½œï¼šæŸ¥çœ‹è¯¦æƒ…ã€ç¼–è¾‘ã€å¯ç”¨/ç¦ç”¨ã€åˆ é™¤

**2) ç½‘å…³è¡¨å•å¯¹è¯æ¡†** (`GatewayForm.vue`)

å­—æ®µï¼š
- ç½‘å…³åç§°*
- ç½‘å…³åºåˆ—å·*
- è®¾å¤‡å‹å·
- å®‰è£…ä½ç½®
- æè¿°

**3) ç½‘å…³è¯¦æƒ…é¡µ** (`detail/index.vue`)

Tabæ ‡ç­¾é¡µï¼š
- **ç½‘å…³ä¿¡æ¯**ï¼šåŸºæœ¬ä¿¡æ¯ã€ç½‘ç»œä¿¡æ¯ã€èµ„æºä¿¡æ¯ã€é…ç½®ä¿¡æ¯
- **å®æ—¶ç›‘æ§**ï¼šCPU/å†…å­˜/ç£ç›˜ä½¿ç”¨ç‡ã€ç½‘ç»œæµé‡ã€è®¾å¤‡ç»Ÿè®¡ï¼ˆä½¿ç”¨EChartsï¼‰
- **å…³è”è§„åˆ™**ï¼šè¯¥ç½‘å…³ä¸‹è¿è¡Œçš„æ‰€æœ‰è§„åˆ™åˆ—è¡¨

#### 2.2.4 API Serviceå®ç°

**æ–‡ä»¶**: `hr-vue3/src/api/iot/edge/gateway.ts`

```typescript
import request from '@/utils/request'

// è¾¹ç¼˜ç½‘å…³ API
export const EdgeGatewayApi = {
  // åˆ†é¡µæŸ¥è¯¢
  getPage: async (params: EdgeGatewayPageReqVO) => {
    return await request.get({ url: `/iot/edge-gateway/page`, params })
  },

  // è·å–è¯¦æƒ…
  get: async (id: number) => {
    return await request.get({ url: `/iot/edge-gateway/get`, params: { id } })
  },

  // é€šè¿‡keyè·å–
  getByKey: async (gatewayKey: string) => {
    return await request.get({
      url: `/iot/edge-gateway/get-by-key`,
      params: { gatewayKey }
    })
  },

  // åˆ›å»ºç½‘å…³
  create: async (data: EdgeGatewayCreateReqVO) => {
    return await request.post({ url: `/iot/edge-gateway/create`, data })
  },

  // æ›´æ–°ç½‘å…³
  update: async (data: EdgeGatewayUpdateReqVO) => {
    return await request.put({ url: `/iot/edge-gateway/update`, data })
  },

  // åˆ é™¤ç½‘å…³
  delete: async (id: number) => {
    return await request.delete({
      url: `/iot/edge-gateway/delete`,
      params: { id }
    })
  },

  // å¯ç”¨ç½‘å…³
  enable: async (id: number) => {
    return await request.put({ url: `/iot/edge-gateway/enable`, params: { id } })
  },

  // ç¦ç”¨ç½‘å…³
  disable: async (id: number) => {
    return await request.put({ url: `/iot/edge-gateway/disable`, params: { id } })
  }
}
```

### 2.3 è¾¹ç¼˜è§„åˆ™ç®¡ç†

#### 2.3.1 åç«¯æ¥å£æ¸…å•

**Base URL**: `/iot/edge-rule`

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| POST | `/create` | åˆ›å»ºè¾¹ç¼˜è§„åˆ™ | iot:edge-rule:create |
| PUT | `/update` | æ›´æ–°è¾¹ç¼˜è§„åˆ™ | iot:edge-rule:update |
| DELETE | `/delete?id={id}` | åˆ é™¤è¾¹ç¼˜è§„åˆ™ | iot:edge-rule:delete |
| GET | `/get?id={id}` | è·å–è§„åˆ™è¯¦æƒ… | iot:edge-rule:query |
| GET | `/page` | åˆ†é¡µæŸ¥è¯¢è§„åˆ™ | iot:edge-rule:query |
| POST | `/deploy?id={id}` | éƒ¨ç½²è§„åˆ™åˆ°ç½‘å…³ | iot:edge-rule:deploy |
| POST | `/undeploy?id={id}` | å–æ¶ˆéƒ¨ç½²è§„åˆ™ | iot:edge-rule:deploy |
| PUT | `/enable?id={id}` | å¯ç”¨è§„åˆ™ | iot:edge-rule:update |
| PUT | `/disable?id={id}` | ç¦ç”¨è§„åˆ™ | iot:edge-rule:update |

#### 2.3.2 æ•°æ®ç»“æ„

```typescript
/**
 * è¾¹ç¼˜è§„åˆ™å“åº”VO
 */
export interface EdgeRuleVO {
  id: number                      // ä¸»é”®
  name: string                    // è§„åˆ™åç§°
  gatewayId: number               // ç½‘å…³ID

  // è§„åˆ™é…ç½®
  ruleType: string                // è§„åˆ™ç±»å‹: SCENE, DATA_FLOW, AI_INFERENCE
  triggerConfig: string           // è§¦å‘å™¨é…ç½®(JSONå­—ç¬¦ä¸²)
  conditionConfig: string         // æ¡ä»¶é…ç½®(JSONå­—ç¬¦ä¸²)
  actionConfig: string            // åŠ¨ä½œé…ç½®(JSONå­—ç¬¦ä¸²)

  // æ‰§è¡Œé…ç½®
  executeLocal: number            // æ˜¯å¦æœ¬åœ°æ‰§è¡Œ: 0=å¦, 1=æ˜¯
  priority: number                // ä¼˜å…ˆçº§

  // çŠ¶æ€ä¿¡æ¯
  status: number                  // çŠ¶æ€: 0=ç¦ç”¨, 1=å¯ç”¨
  deployStatus: number            // éƒ¨ç½²çŠ¶æ€: 0=æœªéƒ¨ç½², 1=å·²éƒ¨ç½², 2=éƒ¨ç½²å¤±è´¥
  deployTime: Date                // éƒ¨ç½²æ—¶é—´
  deployError: string             // éƒ¨ç½²é”™è¯¯ä¿¡æ¯

  // ç»Ÿè®¡ä¿¡æ¯
  executeCount: number            // æ‰§è¡Œæ¬¡æ•°
  lastExecuteTime: Date           // æœ€åæ‰§è¡Œæ—¶é—´

  description: string             // æè¿°
  createTime: Date                // åˆ›å»ºæ—¶é—´
  updateTime: Date                // æ›´æ–°æ—¶é—´
}

/**
 * è¾¹ç¼˜è§„åˆ™åˆ†é¡µæŸ¥è¯¢è¯·æ±‚VO
 */
export interface EdgeRulePageReqVO {
  pageNo: number                  // é¡µç 
  pageSize: number                // æ¯é¡µæ•°é‡
  name?: string                   // è§„åˆ™åç§°ï¼ˆæ¨¡ç³Šæœç´¢ï¼‰
  gatewayId?: number              // ç½‘å…³ID
  ruleType?: string               // è§„åˆ™ç±»å‹
  status?: number                 // çŠ¶æ€
  deployStatus?: number           // éƒ¨ç½²çŠ¶æ€
}
```

#### 2.3.3 é¡µé¢è®¾è®¡

**ç›®å½•ç»“æ„**ï¼š
```
hr-vue3/src/views/iot/edge/
â”œâ”€â”€ rule/
â”‚   â”œâ”€â”€ index.vue               # è§„åˆ™åˆ—è¡¨é¡µ
â”‚   â”œâ”€â”€ RuleForm.vue            # è§„åˆ™è¡¨å•ï¼ˆåˆ›å»º/ç¼–è¾‘ï¼‰
â”‚   â””â”€â”€ detail/
â”‚       â”œâ”€â”€ index.vue           # è§„åˆ™è¯¦æƒ…é¡µ
â”‚       â”œâ”€â”€ RuleInfo.vue        # è§„åˆ™ä¿¡æ¯Tab
â”‚       â”œâ”€â”€ RuleLog.vue         # æ‰§è¡Œæ—¥å¿—Tab
â”‚       â””â”€â”€ RuleConfig.vue      # é…ç½®ç¼–è¾‘Tab
```

**è§„åˆ™åˆ—è¡¨é¡µ**ï¼š
- æœç´¢æ ï¼šè§„åˆ™åç§°ã€ç½‘å…³ã€è§„åˆ™ç±»å‹ã€çŠ¶æ€ã€éƒ¨ç½²çŠ¶æ€
- æ“ä½œæ ï¼šæ–°å»ºè§„åˆ™
- è¡¨æ ¼ï¼š
  - åˆ—ï¼šåç§°ã€ç½‘å…³ã€è§„åˆ™ç±»å‹ã€çŠ¶æ€ã€éƒ¨ç½²çŠ¶æ€ã€æ‰§è¡Œæ¬¡æ•°ã€æœ€åæ‰§è¡Œæ—¶é—´ã€æ“ä½œ
  - éƒ¨ç½²çŠ¶æ€badgeï¼šæœªéƒ¨ç½²(ç°)ã€å·²éƒ¨ç½²(ç»¿)ã€éƒ¨ç½²å¤±è´¥(çº¢)
  - æ“ä½œï¼šæŸ¥çœ‹è¯¦æƒ…ã€ç¼–è¾‘ã€éƒ¨ç½²/å–æ¶ˆéƒ¨ç½²ã€å¯ç”¨/ç¦ç”¨ã€åˆ é™¤

#### 2.3.4 API Serviceå®ç°

**æ–‡ä»¶**: `hr-vue3/src/api/iot/edge/rule.ts`

```typescript
import request from '@/utils/request'

// è¾¹ç¼˜è§„åˆ™ API
export const EdgeRuleApi = {
  // åˆ†é¡µæŸ¥è¯¢
  getPage: async (params: EdgeRulePageReqVO) => {
    return await request.get({ url: `/iot/edge-rule/page`, params })
  },

  // è·å–è¯¦æƒ…
  get: async (id: number) => {
    return await request.get({ url: `/iot/edge-rule/get`, params: { id } })
  },

  // åˆ›å»ºè§„åˆ™
  create: async (data: any) => {
    return await request.post({ url: `/iot/edge-rule/create`, data })
  },

  // æ›´æ–°è§„åˆ™
  update: async (data: any) => {
    return await request.put({ url: `/iot/edge-rule/update`, data })
  },

  // åˆ é™¤è§„åˆ™
  delete: async (id: number) => {
    return await request.delete({ url: `/iot/edge-rule/delete`, params: { id } })
  },

  // éƒ¨ç½²è§„åˆ™
  deploy: async (id: number) => {
    return await request.post({ url: `/iot/edge-rule/deploy`, params: { id } })
  },

  // å–æ¶ˆéƒ¨ç½²
  undeploy: async (id: number) => {
    return await request.post({ url: `/iot/edge-rule/undeploy`, params: { id } })
  },

  // å¯ç”¨è§„åˆ™
  enable: async (id: number) => {
    return await request.put({ url: `/iot/edge-rule/enable`, params: { id } })
  },

  // ç¦ç”¨è§„åˆ™
  disable: async (id: number) => {
    return await request.put({ url: `/iot/edge-rule/disable`, params: { id } })
  }
}
```

### 2.4 è¾¹ç¼˜AIæ¨¡å‹ç®¡ç†

#### 2.4.1 åç«¯æ¥å£æ¸…å•

**Base URL**: `/iot/edge-ai-model`

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | æƒé™ |
|------|------|------|------|
| POST | `/create` | åˆ›å»ºAIæ¨¡å‹ | iot:edge-ai-model:create |
| PUT | `/update` | æ›´æ–°AIæ¨¡å‹ | iot:edge-ai-model:update |
| DELETE | `/delete?id={id}` | åˆ é™¤AIæ¨¡å‹ | iot:edge-ai-model:delete |
| GET | `/get?id={id}` | è·å–æ¨¡å‹è¯¦æƒ… | iot:edge-ai-model:query |
| GET | `/page` | åˆ†é¡µæŸ¥è¯¢æ¨¡å‹ | iot:edge-ai-model:query |
| PUT | `/enable?id={id}` | å¯ç”¨æ¨¡å‹ | iot:edge-ai-model:update |
| PUT | `/disable?id={id}` | ç¦ç”¨æ¨¡å‹ | iot:edge-ai-model:update |

#### 2.4.2 æ•°æ®ç»“æ„

```typescript
/**
 * è¾¹ç¼˜AIæ¨¡å‹å“åº”VO
 */
export interface EdgeAiModelVO {
  id: number                      // ä¸»é”®
  name: string                    // æ¨¡å‹åç§°
  modelKey: string                // æ¨¡å‹æ ‡è¯†
  modelType: string               // æ¨¡å‹ç±»å‹
  modelFormat: string             // æ¨¡å‹æ ¼å¼
  modelVersion: string            // æ¨¡å‹ç‰ˆæœ¬
  modelUrl: string                // æ¨¡å‹æ–‡ä»¶URL
  modelSize: number               // æ¨¡å‹å¤§å°(KB)
  inputConfig: string             // è¾“å…¥é…ç½®(JSON)
  outputConfig: string            // è¾“å‡ºé…ç½®(JSON)
  status: number                  // çŠ¶æ€: 0=ç¦ç”¨, 1=å¯ç”¨
  description: string             // æè¿°
  createTime: Date                // åˆ›å»ºæ—¶é—´
}
```

#### 2.4.3 é¡µé¢è®¾è®¡

**ç›®å½•ç»“æ„**ï¼š
```
hr-vue3/src/views/iot/edge/
â”œâ”€â”€ aimodel/
â”‚   â”œâ”€â”€ index.vue               # AIæ¨¡å‹åˆ—è¡¨é¡µ
â”‚   â”œâ”€â”€ ModelForm.vue           # æ¨¡å‹è¡¨å•
â”‚   â””â”€â”€ detail/
â”‚       â”œâ”€â”€ index.vue           # æ¨¡å‹è¯¦æƒ…é¡µ
â”‚       â””â”€â”€ ModelDeployments.vue # éƒ¨ç½²è®°å½•Tab
```

---

## ä¸‰ã€è·¯ç”±é…ç½®

**æ–‡ä»¶**: `hr-vue3/src/router/modules/iot.ts` æˆ– `hr-vue3/src/router/index.ts`

```typescript
{
  path: '/iot',
  component: Layout,
  redirect: '/iot/home',
  name: 'IoT',
  meta: { title: 'IoTç®¡ç†', icon: 'ep:connection' },
  children: [
    // ... å…¶ä»–IoTè·¯ç”±

    // è¾¹ç¼˜è®¡ç®—è·¯ç”±
    {
      path: 'edge',
      name: 'EdgeComputing',
      meta: { title: 'è¾¹ç¼˜è®¡ç®—', icon: 'ep:cpu' },
      children: [
        {
          path: 'gateway',
          name: 'EdgeGateway',
          component: () => import('@/views/iot/edge/gateway/index.vue'),
          meta: { title: 'è¾¹ç¼˜ç½‘å…³', icon: 'ep:box' }
        },
        {
          path: 'gateway/detail/:id',
          name: 'EdgeGatewayDetail',
          component: () => import('@/views/iot/edge/gateway/detail/index.vue'),
          meta: {
            title: 'ç½‘å…³è¯¦æƒ…',
            activeMenu: '/iot/edge/gateway',
            noCache: true,
            hidden: true
          }
        },
        {
          path: 'rule',
          name: 'EdgeRule',
          component: () => import('@/views/iot/edge/rule/index.vue'),
          meta: { title: 'è¾¹ç¼˜è§„åˆ™', icon: 'ep:operation' }
        },
        {
          path: 'rule/detail/:id',
          name: 'EdgeRuleDetail',
          component: () => import('@/views/iot/edge/rule/detail/index.vue'),
          meta: {
            title: 'è§„åˆ™è¯¦æƒ…',
            activeMenu: '/iot/edge/rule',
            noCache: true,
            hidden: true
          }
        },
        {
          path: 'aimodel',
          name: 'EdgeAiModel',
          component: () => import('@/views/iot/edge/aimodel/index.vue'),
          meta: { title: 'è¾¹ç¼˜AIæ¨¡å‹', icon: 'ep:cpu' }
        }
      ]
    }
  ]
}
```

---

## å››ã€å¼€å‘ä¼˜å…ˆçº§å’Œå®æ–½è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰

**Week 1-2**: è¾¹ç¼˜ç½‘å…³ç®¡ç†
- [ ] è¾¹ç¼˜ç½‘å…³åˆ—è¡¨é¡µ
- [ ] ç½‘å…³åˆ›å»º/ç¼–è¾‘è¡¨å•
- [ ] ç½‘å…³è¯¦æƒ…é¡µï¼ˆåŸºæœ¬ä¿¡æ¯ï¼‰
- [ ] API Serviceå®ç°

**Week 3**: è®¾å¤‡å½±å­åŸºç¡€åŠŸèƒ½
- [ ] è®¾å¤‡è¯¦æƒ…é¡µå¢åŠ å½±å­Tab
- [ ] å½±å­ä¸‰æ å±•ç¤ºï¼ˆæœŸæœ›/å®é™…/å·®é‡ï¼‰
- [ ] æœŸæœ›çŠ¶æ€ç¼–è¾‘åŠŸèƒ½
- [ ] API Serviceå®ç°

### ç¬¬äºŒé˜¶æ®µï¼šè§„åˆ™å’Œæ¨¡å‹ç®¡ç†

**Week 4-5**: è¾¹ç¼˜è§„åˆ™ç®¡ç†
- [ ] è¾¹ç¼˜è§„åˆ™åˆ—è¡¨é¡µ
- [ ] è§„åˆ™åˆ›å»º/ç¼–è¾‘è¡¨å•
- [ ] è§„åˆ™éƒ¨ç½²åŠŸèƒ½
- [ ] API Serviceå®ç°

**Week 6**: è¾¹ç¼˜AIæ¨¡å‹ç®¡ç†
- [ ] AIæ¨¡å‹åˆ—è¡¨é¡µ
- [ ] æ¨¡å‹åˆ›å»º/ç¼–è¾‘è¡¨å•
- [ ] API Serviceå®ç°

### ç¬¬ä¸‰é˜¶æ®µï¼šå¢å¼ºåŠŸèƒ½

**Week 7**: ç›‘æ§å’Œæ—¥å¿—
- [ ] ç½‘å…³å®æ—¶ç›‘æ§ï¼ˆEChartså›¾è¡¨ï¼‰
- [ ] è§„åˆ™æ‰§è¡Œæ—¥å¿—æŸ¥è¯¢
- [ ] å½±å­å†å²è®°å½•æŸ¥è¯¢

**Week 8**: ä¼˜åŒ–å’Œå®Œå–„
- [ ] ç•Œé¢ä¼˜åŒ–å’Œäº¤äº’æ”¹è¿›
- [ ] é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] æ–‡æ¡£å®Œå–„

---

## äº”ã€æŠ€æœ¯è¦ç‚¹å’Œæ³¨æ„äº‹é¡¹

### 5.1 JSONç¼–è¾‘å™¨ç»„ä»¶

**æ¨èæ–¹æ¡ˆ**ï¼š
- ç®€å•åœºæ™¯ï¼šä½¿ç”¨ `el-input` é…åˆ `type="textarea"` å’ŒJSONæ ¼å¼éªŒè¯
- å¤æ‚åœºæ™¯ï¼šé›†æˆ `Monaco Editor` æˆ– `CodeMirror`

**ç¤ºä¾‹**ï¼ˆç®€å•JSONç¼–è¾‘ï¼‰ï¼š
```vue
<template>
  <el-form-item label="æœŸæœ›çŠ¶æ€">
    <el-input
      v-model="desiredJson"
      type="textarea"
      :rows="10"
      placeholder="è¯·è¾“å…¥JSONæ ¼å¼çš„æœŸæœ›çŠ¶æ€"
    />
    <div v-if="jsonError" class="error-text">{{ jsonError }}</div>
  </el-form-item>
</template>

<script setup lang="ts">
import { ref, watch } from 'vue'

const desiredJson = ref('')
const jsonError = ref('')

// JSONæ ¼å¼æ ¡éªŒ
watch(desiredJson, (val) => {
  try {
    JSON.parse(val)
    jsonError.value = ''
  } catch (e) {
    jsonError.value = 'JSONæ ¼å¼é”™è¯¯'
  }
})
</script>
```

### 5.2 çŠ¶æ€badgeç»„ä»¶

**å°è£…é€šç”¨çŠ¶æ€badge**ï¼š
```vue
<!-- components/StatusBadge.vue -->
<template>
  <el-tag :type="tagType">{{ label }}</el-tag>
</template>

<script setup lang="ts">
import { computed } from 'vue'

const props = defineProps<{
  status: number
  statusMap: Record<number, { label: string; type: string }>
}>()

const tagType = computed(() => props.statusMap[props.status]?.type || 'info')
const label = computed(() => props.statusMap[props.status]?.label || 'æœªçŸ¥')
</script>
```

### 5.3 å®æ—¶ç›‘æ§å›¾è¡¨

**ä½¿ç”¨EChartså±•ç¤ºç›‘æ§æ•°æ®**ï¼š
```typescript
import * as echarts from 'echarts'
import { onMounted, ref } from 'vue'

const chartRef = ref<HTMLDivElement>()
let chartInstance: echarts.ECharts | null = null

onMounted(() => {
  chartInstance = echarts.init(chartRef.value!)

  // CPUä½¿ç”¨ç‡æŠ˜çº¿å›¾
  chartInstance.setOption({
    title: { text: 'CPUä½¿ç”¨ç‡' },
    xAxis: { type: 'time' },
    yAxis: { type: 'value', max: 100, axisLabel: { formatter: '{value}%' } },
    series: [{
      type: 'line',
      data: [] // ä»APIè·å–çš„ç›‘æ§æ•°æ®
    }]
  })
})
```

### 5.4 æƒé™æ§åˆ¶

ä½¿ç”¨æŒ‡ä»¤æ§åˆ¶æŒ‰é’®æƒé™ï¼š
```vue
<el-button
  v-hasPermi="['iot:edge-gateway:create']"
  @click="handleCreate"
>
  æ–°å»ºç½‘å…³
</el-button>
```

### 5.5 é”™è¯¯å¤„ç†

ç»Ÿä¸€é”™è¯¯å¤„ç†ï¼š
```typescript
try {
  await EdgeGatewayApi.create(formData)
  ElMessage.success('åˆ›å»ºæˆåŠŸ')
  await fetchData() // åˆ·æ–°åˆ—è¡¨
} catch (error) {
  console.error('åˆ›å»ºå¤±è´¥:', error)
  ElMessage.error('åˆ›å»ºå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•')
}
```

---

## å…­ã€æ•°æ®å­—å…¸å’Œæšä¸¾

### 6.1 åç«¯æšä¸¾æ˜ å°„ï¼ˆå‰ç«¯éœ€è¦å®šä¹‰å¯¹åº”çš„æšä¸¾ï¼‰

```typescript
// è¾¹ç¼˜ç½‘å…³çŠ¶æ€æšä¸¾
export enum EdgeGatewayStatus {
  INACTIVE = 0,  // æœªæ¿€æ´»
  ONLINE = 1,    // åœ¨çº¿
  OFFLINE = 2    // ç¦»çº¿
}

export const EdgeGatewayStatusMap = {
  [EdgeGatewayStatus.INACTIVE]: { label: 'æœªæ¿€æ´»', type: 'warning' },
  [EdgeGatewayStatus.ONLINE]: { label: 'åœ¨çº¿', type: 'success' },
  [EdgeGatewayStatus.OFFLINE]: { label: 'ç¦»çº¿', type: 'info' }
}

// è¾¹ç¼˜è§„åˆ™ç±»å‹æšä¸¾
export enum EdgeRuleType {
  SCENE = 'SCENE',              // åœºæ™¯è”åŠ¨
  DATA_FLOW = 'DATA_FLOW',      // æ•°æ®æµè½¬
  AI_INFERENCE = 'AI_INFERENCE' // AIæ¨ç†
}

// è¾¹ç¼˜è§„åˆ™éƒ¨ç½²çŠ¶æ€æšä¸¾
export enum EdgeRuleDeployStatus {
  NOT_DEPLOYED = 0,    // æœªéƒ¨ç½²
  DEPLOYED = 1,        // å·²éƒ¨ç½²
  DEPLOY_FAILED = 2    // éƒ¨ç½²å¤±è´¥
}

export const EdgeRuleDeployStatusMap = {
  [EdgeRuleDeployStatus.NOT_DEPLOYED]: { label: 'æœªéƒ¨ç½²', type: 'info' },
  [EdgeRuleDeployStatus.DEPLOYED]: { label: 'å·²éƒ¨ç½²', type: 'success' },
  [EdgeRuleDeployStatus.DEPLOY_FAILED]: { label: 'éƒ¨ç½²å¤±è´¥', type: 'danger' }
}
```

---

## ä¸ƒã€APIæ¥å£å®Œæ•´æ¸…å•æ±‡æ€»

### è®¾å¤‡å½±å­æ¥å£

| API | æ–¹æ³• | è·¯å¾„ |
|-----|------|------|
| è·å–å½±å­ | GET | /iot/device-shadow/get |
| æ›´æ–°æœŸæœ›çŠ¶æ€ | PUT | /iot/device-shadow/update-desired |
| æ›´æ–°å®é™…çŠ¶æ€ | PUT | /iot/device-shadow/update-reported |
| åˆ é™¤æœŸæœ›å±æ€§ | DELETE | /iot/device-shadow/delete-desired-property |
| è·å–å·®é‡ | GET | /iot/device-shadow/get-delta |
| è·å–å†å² | GET | /iot/device-shadow/history |
| æ¸…é™¤å½±å­ | DELETE | /iot/device-shadow/clear |

### è¾¹ç¼˜ç½‘å…³æ¥å£

| API | æ–¹æ³• | è·¯å¾„ |
|-----|------|------|
| åˆ†é¡µæŸ¥è¯¢ | GET | /iot/edge-gateway/page |
| è·å–è¯¦æƒ… | GET | /iot/edge-gateway/get |
| é€šè¿‡keyè·å– | GET | /iot/edge-gateway/get-by-key |
| åˆ›å»ºç½‘å…³ | POST | /iot/edge-gateway/create |
| æ›´æ–°ç½‘å…³ | PUT | /iot/edge-gateway/update |
| åˆ é™¤ç½‘å…³ | DELETE | /iot/edge-gateway/delete |
| å¯ç”¨ç½‘å…³ | PUT | /iot/edge-gateway/enable |
| ç¦ç”¨ç½‘å…³ | PUT | /iot/edge-gateway/disable |

### è¾¹ç¼˜è§„åˆ™æ¥å£

| API | æ–¹æ³• | è·¯å¾„ |
|-----|------|------|
| åˆ†é¡µæŸ¥è¯¢ | GET | /iot/edge-rule/page |
| è·å–è¯¦æƒ… | GET | /iot/edge-rule/get |
| åˆ›å»ºè§„åˆ™ | POST | /iot/edge-rule/create |
| æ›´æ–°è§„åˆ™ | PUT | /iot/edge-rule/update |
| åˆ é™¤è§„åˆ™ | DELETE | /iot/edge-rule/delete |
| éƒ¨ç½²è§„åˆ™ | POST | /iot/edge-rule/deploy |
| å–æ¶ˆéƒ¨ç½² | POST | /iot/edge-rule/undeploy |
| å¯ç”¨è§„åˆ™ | PUT | /iot/edge-rule/enable |
| ç¦ç”¨è§„åˆ™ | PUT | /iot/edge-rule/disable |

### è¾¹ç¼˜AIæ¨¡å‹æ¥å£

| API | æ–¹æ³• | è·¯å¾„ |
|-----|------|------|
| åˆ†é¡µæŸ¥è¯¢ | GET | /iot/edge-ai-model/page |
| è·å–è¯¦æƒ… | GET | /iot/edge-ai-model/get |
| åˆ›å»ºæ¨¡å‹ | POST | /iot/edge-ai-model/create |
| æ›´æ–°æ¨¡å‹ | PUT | /iot/edge-ai-model/update |
| åˆ é™¤æ¨¡å‹ | DELETE | /iot/edge-ai-model/delete |
| å¯ç”¨æ¨¡å‹ | PUT | /iot/edge-ai-model/enable |
| ç¦ç”¨æ¨¡å‹ | PUT | /iot/edge-ai-model/disable |

---

## å…«ã€å‚è€ƒæ–‡æ¡£

- åç«¯éœ€æ±‚åˆ†æï¼š`yudao-module-iot/è®¾å¤‡å½±å­ä¸è¾¹ç¼˜è®¡ç®—éœ€æ±‚åˆ†æ.md`
- è®¾å¤‡å½±å­ä½¿ç”¨æŒ‡å—ï¼š`yudao-module-iot/è®¾å¤‡å½±å­ä½¿ç”¨æŒ‡å—.md`
- è¾¹ç¼˜è®¡ç®—ä½¿ç”¨æŒ‡å—ï¼š`yudao-module-iot/è¾¹ç¼˜è®¡ç®—ä½¿ç”¨æŒ‡å—.md`
- åç«¯Controlleræºç ï¼š`yudao-module-iot-biz/src/main/java/cn/iocoder/yudao/module/iot/controller/admin/`

---

## ä¹ã€æ€»ç»“

æœ¬æ–‡æ¡£åŸºäºåç«¯å·²å®ç°çš„å®Œæ•´REST APIæ¥å£ï¼Œä¸ºå‰ç«¯å¼€å‘æä¾›äº†è¯¦ç»†çš„è§„åˆ’å’ŒæŒ‡å¯¼ã€‚ä¸»è¦å†…å®¹åŒ…æ‹¬ï¼š

1. âœ… **è®¾å¤‡å½±å­æ¨¡å—**ï¼š7ä¸ªæ¥å£ï¼Œé›†æˆåˆ°è®¾å¤‡è¯¦æƒ…é¡µ
2. âœ… **è¾¹ç¼˜ç½‘å…³ç®¡ç†**ï¼š8ä¸ªæ¥å£ï¼Œç‹¬ç«‹é¡µé¢ç®¡ç†
3. âœ… **è¾¹ç¼˜è§„åˆ™ç®¡ç†**ï¼š9ä¸ªæ¥å£ï¼Œç‹¬ç«‹é¡µé¢ç®¡ç†
4. âœ… **è¾¹ç¼˜AIæ¨¡å‹ç®¡ç†**ï¼š7ä¸ªæ¥å£ï¼Œç‹¬ç«‹é¡µé¢ç®¡ç†
5. âœ… **æ•°æ®ç»“æ„å®šä¹‰**ï¼šå®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
6. âœ… **é¡µé¢è®¾è®¡æ–¹æ¡ˆ**ï¼šè¯¦ç»†çš„å¸ƒå±€å’Œäº¤äº’è®¾è®¡
7. âœ… **API Serviceå°è£…**ï¼šå®Œæ•´çš„APIè°ƒç”¨å°è£…
8. âœ… **è·¯ç”±é…ç½®**ï¼šå®Œæ•´çš„è·¯ç”±è§„åˆ’
9. âœ… **å®æ–½è®¡åˆ’**ï¼šåˆ†8å‘¨çš„å¼€å‘è®¡åˆ’

**æ¥ä¸‹æ¥çš„æ­¥éª¤**ï¼š
1. æŒ‰ç…§ç¬¬ä¸€é˜¶æ®µè®¡åˆ’å¼€å§‹å¼€å‘
2. å…ˆå®ç°è¾¹ç¼˜ç½‘å…³ç®¡ç†æ¨¡å—ï¼ˆæ ¸å¿ƒæ¨¡å—ï¼‰
3. ç„¶åå®ç°è®¾å¤‡å½±å­åŸºç¡€åŠŸèƒ½
4. é€æ­¥å®Œå–„è§„åˆ™å’Œæ¨¡å‹ç®¡ç†
5. æœ€åå¢åŠ ç›‘æ§å’Œæ—¥å¿—åŠŸèƒ½

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-11-18
**ç»´æŠ¤è€…**: å‰ç«¯å¼€å‘å›¢é˜Ÿ
